{% extends "modelagem/base.html" %}

{% block body %}
    <style>
        .conteudo{
            width: 100%;
        }

        .hide{
            display: none;
        }

        .show{
            display: block;
        }

    </style>

    <div class="info-prot">
        <button class="btn-voltar" onclick='window.location.href = "/listaDNA" ';>Voltar</button>
        <h1>ID: <span class="title-prot">{{dna.id}}</span> - Proteina: <span class="title-prot">{{dna.titulo}} </span> </h1> 
        
        <div class="col">
            <div class="input-group-prepend">
                <span class="input-group-text">Sequência</span>
                <textarea class="form-control col-md-7" rows="3" name="sequencia" id="sequencia" aria-label="Conteúdo da Sequência" disabled>{{dna.sequencia}}</textarea>
                <button onclick="Converter();">Converter</button>
            </div>
        </div>     
        <br>
    </div>

    <div class="info-prot">
        <ul>
            <li><b>Fita Complementar do DNA inserido</b></li>
            <div id="Fita" class="hide"> 
            </div>
            <li><b>Formar RNA mensageiro</b></li>
            <div id="RNAm" class="hide">
            </div>
            <!-- <li><b>Formar RNA transportadores</b></li>
            <div id="RNAt" class="hide">
            </div> -->
            <li><b>Gerar a Proteina formada (aminoacidos)</b></li>
            <div id="Aminoacidos" class="hide">
            </div>
            <li><b>Tabela de Códons<b></li>
    
        </ul>
    </div>

    <div class="info-prot">
        <h2>Taxa de Aparição:</h2>
        <span><b>{{dados}}</b></span>
    </div>

    <div class="info-prot grafico">
        <h2>Representação Gráfica:</h2>
        <div style="text-align: center;">
            <div class='grafic-info' style='background-color:rgba(0, 0, 0, {{transparencia.A}}')><p >{{dados.A}} - A</p></div>
            <div class='grafic-info' style='background-color:rgba(0, 0, 0, {{transparencia.T}}')><p >{{dados.T}} - T</p></div>
            <div class='grafic-info' style='background-color:rgba(0, 0, 0, {{transparencia.G}}')><p >{{dados.G}} - G</p></div>
            <div class='grafic-info' style='background-color:rgba(0, 0, 0, {{transparencia.C}}')><p >{{dados.C}} - C</p></div>
        </div>
    </div>
</div>

<script>
    function Converter(){
        $("#Fita").html('');
        $("#RNAm").html('');
        $("#RNAt").html('');
        $("#Aminoacidos").html('');
        var sequencia = $('#sequencia').val();
        $.ajax({
            method: "POST",
            url: "..\\conversor",
            data: 
            { 
                sequencia: sequencia,
                csrfmiddlewaretoken: '{{ csrf_token }}' 
            },
            success: function(data){
                console.log(data['fita']);
                $("#Fita").removeClass('hide').append(data['fita'],'<p><b>Fita Completa:</b></p>',data['fitaCompleta'],'<p><b>Sobreposição:</b></p>', data['sequencia'], '<br>', data['fita']);
                $("#RNAm").removeClass('hide').append(data['RNAm']);
                $("#Aminoacidos").removeClass('hide').append(data['aminoacidos']);
                
            }
        })
    }
</script>

{% endblock %}